version: "1.0"

inherits:
  base_retention_file: "profiles/core/base/retention.yaml"
  strategy:
    - "override: retention days to reduce PII exposure in raw plane"
    - "ensure: audit plane long retention for defensibility"
    - "add: GDPR workflow notes"

retention_engine:
  enforcement: "planned"
  notes:
    - "Ecommerce raw payloads may contain PII; keep raw retention short."
    - "Canonical outputs should be PII-minimized; retain for analytics."
    - "Audit plane retained long-term for accountability."
    - "All deletions/redactions must be audited."

planes:
  raw_plane:
    enabled: true
    default_retention_days: 30
    deletion_policy: "delete_after_retention"
    compaction_policy: "none"
    notes:
      - "Short raw retention reduces PII exposure."
      - "If longer retention is required for chargebacks/fraud investigations, extend with explicit approval."

  canonical_plane:
    enabled: true
    default_retention_days: 365
    deletion_policy: "delete_after_retention"
    compaction_policy:
      enabled: true
      strategy: "time_bucket_compaction"
      bucket_granularity: "day"
      downsampling_planned: true
    notes:
      - "Canonical retention supports year-over-year comparisons."

  audit_plane:
    enabled: true
    default_retention_days: 3650
    immutability: true
    deletion_policy: "no_delete_by_default"
    verification_retention:
      keep_hash_chain_forever: true
      verification_snapshots_days: 3650
    notes:
      - "Audit records must outlive raw data for governance and compliance."

gdpr_workflows:
  planned: true
  right_to_erasure:
    supported: true
    approach:
      - "Identify affected raw blobs and canonical records via hashed identifiers."
      - "Perform targeted redaction/deletion where legally required."
      - "Record actions as append-only audit events."
    constraints:
      - "Never break audit chain; record redactions as events."
      - "Prefer redaction over deletion when required to preserve financial accounting trails."

legal_hold:
  supported: true
  behavior: "skip_deletion_when_hold_present"
  notes:
    - "Legal hold overrides retention deletions."
    - "Hold actions must be audited and access-controlled."

llm_assist:
  enabled: false
  notes:
    - "Retention is governance-sensitive; no LLM-driven changes."

# -----------------------------------------------------------------------------
# EXAMPLES (comments only)
#
# Example: Extend canonical retention for long-term cohort analysis
# planes:
#   canonical_plane:
#     default_retention_days: 730
# -----------------------------------------------------------------------------
