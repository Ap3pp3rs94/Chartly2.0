version: "1.0"

tenant_id:
  format: "lowercase slug (a-z0-9-), 3..64 chars"
  reserved:
    - "system"
    - "admin"
    - "root"
    - "chartly"
    - "default"
  validation:
    required: true

default_tenant:
  local: "local"

tenant_states:
  active:
    ingestion_allowed: true
    reads_allowed: true
    audit_reads_allowed: true
  suspended:
    ingestion_allowed: false
    reads_allowed: true
    audit_reads_allowed: true
  disabled:
    ingestion_allowed: false
    reads_allowed: false
    audit_reads_allowed: false

quotas:
  defaults:
    max_sources: 1000
    max_rpm_total: 10000
    max_concurrency_total: 2000
    max_per_domain_concurrency: 20

    # Storage caps are policy; enforcement may be incremental
    max_raw_storage_gb: 500
    max_artifacts_storage_gb: 100
    default_retention_days_raw: 90
    default_retention_days_canonical: 365
    default_retention_days_audit: 3650

  environments:
    local:
      max_sources: 200
      max_rpm_total: 2000
      max_concurrency_total: 500
      max_per_domain_concurrency: 10
      max_raw_storage_gb: 50
      max_artifacts_storage_gb: 10
      default_retention_days_raw: 14
      default_retention_days_canonical: 90
      default_retention_days_audit: 365

    staging:
      max_sources: 2000
      max_rpm_total: 15000
      max_concurrency_total: 2500
      max_per_domain_concurrency: 12
      max_raw_storage_gb: 500
      max_artifacts_storage_gb: 100
      default_retention_days_raw: 30
      default_retention_days_canonical: 180
      default_retention_days_audit: 3650

    production:
      max_sources: 100000
      max_rpm_total: 250000
      max_concurrency_total: 20000
      max_per_domain_concurrency: 25
      max_raw_storage_gb: 10000
      max_artifacts_storage_gb: 2000
      default_retention_days_raw: 90
      default_retention_days_canonical: 730
      default_retention_days_audit: 3650

policy:
  suspended_tenant_behavior:
    ingestion: "deny"
    read_access: "allow"
    audit_access: "allow"
    admin_override_required: true
  enforcement_notes:
    - "Quotas should be enforced at gateway (request shaping) and orchestrator (dispatch shaping)."
    - "Connector-hub enforces per-domain concurrency and rpm caps."
    - "Storage retention is enforced by lifecycle jobs (roadmap)."
