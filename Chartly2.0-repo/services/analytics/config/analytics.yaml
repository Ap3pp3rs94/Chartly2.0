# Chartly 2.0  Analytics configuration
#
# NOTE (IMPORTANT):
# - Current runtime behavior is driven by ENV vars in cmd/analytics/main.go.
# - This file is a production-ready scaffold for future expansion.
# - Sections marked "ROADMAP" are NOT implemented yet and MUST be treated as placeholders.

service:
  name: analytics
  env: local
  addr: ":8084"

  timeouts_ms:
    read: 5000
    write: 10000
    idle: 60000
    shutdown: 10000

  max_header_bytes: 1048576

headers:
  request_id: "X-Request-Id"
  tenant_id: "X-Tenant-Id"

cors:
  # IMPLEMENTED (local behavior): main.go enables permissive CORS when env=local.
  enabled: true
  allow_origins: ["*"]
  allow_methods: ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"]
  allow_headers: ["Content-Type", "Authorization", "X-Request-Id", "X-Tenant-Id"]
  expose_headers: ["X-Request-Id"]

logging:
  # IMPLEMENTED: JSON lines to stdout via stdlib logger wrapper.
  format: json
  level: info

analytics_api:
  # IMPLEMENTED (STUB): /analyze exists; /metrics returns 501.
  enabled: true

  endpoints:
    analyze: true
    metrics: true

  # ROADMAP: tenant-level quotas / rate-limits
  rate_limit:
    enabled: false
    rps: 5
    burst: 10

metrics:
  # ROADMAP: metric collectors (histograms, counters) and query APIs
  enabled: false
  collectors: []

reports:
  # ROADMAP: report definitions and generators
  enabled: false
  definitions: []

storage:
  # ROADMAP: sinks for analytics artifacts (object store, db, event bus)
  enabled: false
  sink:
    type: "none" # none|filesystem|s3|postgres|kafka (future)
    config: {}

telemetry:
  # ROADMAP: metrics/tracing (OTEL, Prometheus, etc.)
  enabled: false
  metrics:
    enabled: false
  tracing:
    enabled: false
